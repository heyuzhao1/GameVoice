# 本地单机测试远程语音方案

要在本地一台电脑上测试远程语音功能，主要挑战在于**音频设备的冲突（啸叫）**和**多实例运行**。

## 测试方案

### 1. 启动两个客户端实例
由于 Electron 应用默认允许运行多实例（除非显式禁止），我们可以直接启动两个窗口来模拟两个用户。
- **实例 A（房主）**：启动内置信令服务器，创建房间。
- **实例 B（访客）**：连接到实例 A 的信令服务器，加入房间。

### 2. 解决音频啸叫问题
这是单机测试最关键的一点。两个客户端同时采集麦克风并播放对方的声音，会形成**正反馈回路（啸叫）**。
- **方案**：
    1.  **物理隔离**：佩戴**耳机**，避免麦克风采集到扬声器的声音。
    2.  **软件静音**：在加入房间后，**立即点击静音按钮**（至少一方静音），或者在系统音量合成器中将其中一个应用的音量调低。

## 具体操作步骤

1.  **启动第一个客户端（房主）**
    - 在终端运行 `npm start`。
    - 点击 "创建随机房间"。
    - 复制房间 ID（例如 `ABC12345`）。

2.  **启动第二个客户端（访客）**
    - 打开**新的终端窗口**。
    - 再次运行 `npm start`。
    - **注意**：终端可能会提示端口占用（因为信令服务器已经在第一个实例中运行），这是**正常且预期**的。第二个实例会自动作为纯客户端运行。
    - 在界面输入框粘贴房间 ID。
    - 点击 "加入房间"。

3.  **验证功能**
    - **信令连通**：观察两个窗口是否都显示 "2 人在线"。
    - **语音通话**：
        - 佩戴耳机。
        - 对着麦克风说话，观察对方窗口的波形/音量条是否跳动。
        - 确认能听到（或看到）对方的声音反馈。

## 进阶测试：模拟真实网络环境（可选）
如果想测试网络延迟或丢包对语音的影响，可以使用 Chrome 浏览器的开发者工具（如果是 Web 端）或网络模拟工具（如 Clumsy on Windows）。

## 准备工作
无需额外代码修改，直接使用现有代码即可。我将为您演示如何启动两个实例。
